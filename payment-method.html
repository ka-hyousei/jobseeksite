## 10. payment-method.html (æ”¯æ‰•ã„æ–¹æ³•é¸æŠ)

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠæ”¯æ‰•ã„æ–¹æ³• - TechJob</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .payment-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            padding: 3rem;
        }

        .logo {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 2rem;
        }

        .order-summary {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .order-summary h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.2rem;
            color: #667eea;
            padding-top: 1rem;
            margin-top: 0.5rem;
            border-top: 2px solid #667eea;
        }

        .payment-methods {
            margin-bottom: 2rem;
        }

        .payment-methods h3 {
            color: #333;
            margin-bottom: 1.5rem;
        }

        .payment-method-grid {
            display: grid;
            gap: 1rem;
        }

        .payment-method {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .payment-method:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .payment-method.selected {
            border-color: #667eea;
            background: #f0f3ff;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .payment-icon {
            font-size: 3rem;
            width: 80px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 10px;
        }

        .payment-info {
            flex: 1;
        }

        .payment-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 0.3rem;
        }

        .payment-description {
            color: #666;
            font-size: 0.85rem;
        }

        .radio-indicator {
            width: 24px;
            height: 24px;
            border: 2px solid #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-method.selected .radio-indicator {
            border-color: #667eea;
        }

        .payment-method.selected .radio-indicator::after {
            content: '';
            width: 12px;
            height: 12px;
            background: #667eea;
            border-radius: 50%;
        }

        .credit-card-form {
            display: none;
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .credit-card-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .security-note {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 5px;
        }

        .security-note p {
            color: #2e7d32;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-pay {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .btn-pay:hover {
            transform: translateY(-2px);
        }

        .btn-pay:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .back-link {
            text-align: center;
            margin-top: 1.5rem;
        }

        .back-link a {
            color: #667eea;
            text-decoration: none;
        }

        .trial-notice {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .trial-notice p {
            color: #856404;
            margin: 0;
        }

        @media (max-width: 768px) {
            .payment-container {
                padding: 2rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .payment-method {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="payment-container">
        <div class="logo">ğŸ’³</div>
        <h2>ãŠæ”¯æ‰•ã„æ–¹æ³•ã‚’é¸æŠ</h2>

        <div class="trial-notice">
            <p>â­ 14æ—¥é–“ã®ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“ä¸­ã¯ãŠæ”¯æ‰•ã„ã¯ç™ºç”Ÿã—ã¾ã›ã‚“</p>
        </div>

        <div class="order-summary">
            <h3>ã”æ³¨æ–‡å†…å®¹</h3>
            <div class="summary-item">
                <span>ãƒ—ãƒ©ãƒ³</span>
                <span id="planName">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³</span>
            </div>
            <div class="summary-item">
                <span>æœŸé–“</span>
                <span>æœˆé¡</span>
            </div>
            <div class="summary-item">
                <span>ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«</span>
                <span>14æ—¥é–“</span>
            </div>
            <div class="summary-item">
                <span>åˆè¨ˆé‡‘é¡</span>
                <span id="totalAmount">Â¥29,800/æœˆ</span>
            </div>
        </div>

        <div class="payment-methods">
            <h3>ãŠæ”¯æ‰•ã„æ–¹æ³•</h3>
            
            <div class="payment-method-grid">
                <!-- ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ -->
                <div class="payment-method" onclick="selectPaymentMethod('creditcard')">
                    <div class="payment-icon">ğŸ’³</div>
                    <div class="payment-info">
                        <div class="payment-name">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</div>
                        <div class="payment-description">Visa, Mastercard, JCB, American Express</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>

                <!-- PayPay -->
                <div class="payment-method" onclick="selectPaymentMethod('paypay')">
                    <div class="payment-icon" style="background: #ff6b6b; color: white; font-weight: bold;">
                        PayPay
                    </div>
                    <div class="payment-info">
                        <div class="payment-name">PayPay</div>
                        <div class="payment-description">PayPayã‚¢ãƒ—ãƒªã§ç°¡å˜æ±ºæ¸ˆ</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>

                <!-- Alipay -->
                <div class="payment-method" onclick="selectPaymentMethod('alipay')">
                    <div class="payment-icon" style="background: #1678FF; color: white; font-weight: bold; font-size: 1.2rem;">
                        Alipay
                    </div>
                    <div class="payment-info">
                        <div class="payment-name">Alipay (æ”¯ä»˜å®)</div>
                        <div class="payment-description">ã‚¢ãƒªãƒšã‚¤ã§æ”¯æ‰•ã†</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>

                <!-- WeChat Pay -->
                <div class="payment-method" onclick="selectPaymentMethod('wechat')">
                    <div class="payment-icon" style="background: #09B83E; color: white; font-weight: bold; font-size: 1.2rem;">
                        WeChat
                    </div>
                    <div class="payment-info">
                        <div class="payment-name">WeChat Pay (å¾®ä¿¡æ”¯ä»˜)</div>
                        <div class="payment-description">ã‚¦ã‚£ãƒ¼ãƒãƒ£ãƒƒãƒˆãƒšã‚¤ã§æ”¯æ‰•ã†</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>

                <!-- ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ -->
                <div class="payment-method" onclick="selectPaymentMethod('convenience')">
                    <div class="payment-icon">ğŸª</div>
                    <div class="payment-info">
                        <div class="payment-name">ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ</div>
                        <div class="payment-description">ã‚»ãƒ–ãƒ³ã€ãƒ­ãƒ¼ã‚½ãƒ³ã€ãƒ•ã‚¡ãƒŸãƒã§æ”¯æ‰•ã„</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>

                <!-- éŠ€è¡ŒæŒ¯è¾¼ -->
                <div class="payment-method" onclick="selectPaymentMethod('banktransfer')">
                    <div class="payment-icon">ğŸ¦</div>
                    <div class="payment-info">
                        <div class="payment-name">éŠ€è¡ŒæŒ¯è¾¼</div>
                        <div class="payment-description">æŒ¯è¾¼æ‰‹æ•°æ–™ã¯ãŠå®¢æ§˜è² æ‹…ã¨ãªã‚Šã¾ã™</div>
                    </div>
                    <div class="radio-indicator"></div>
                </div>
            </div>
        </div>

        <!-- ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div id="creditCardForm" class="credit-card-form">
            <div class="form-group">
                <label for="cardNumber">ã‚«ãƒ¼ãƒ‰ç•ªå·</label>
                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
            </div>
            <div class="form-group">
                <label for="cardName">ã‚«ãƒ¼ãƒ‰åç¾©äºº</label>
                <input type="text" id="cardName" placeholder="TARO YAMADA">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="expiry">æœ‰åŠ¹æœŸé™</label>
                    <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-group">
                    <label for="cvv">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰</label>
                    <input type="text" id="cvv" placeholder="123" maxlength="4">
                </div>
            </div>
        </div>

        <div class="security-note">
            <p>ğŸ”’ ã™ã¹ã¦ã®æ±ºæ¸ˆæƒ…å ±ã¯æš—å·åŒ–ã•ã‚Œã¦å®‰å…¨ã«å‡¦ç†ã•ã‚Œã¾ã™</p>
        </div>

        <button class="btn-pay" id="payButton" disabled onclick="processPayment()">
            æ”¯æ‰•ã„æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„
        </button>

        <div class="back-link">
            <a href="payment-plan.html">â† ãƒ—ãƒ©ãƒ³é¸æŠã«æˆ»ã‚‹</a>
        </div>
    </div>

    <script>
        let selectedMethod = '';
        let planData = {};

        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æƒ…å ±ã‚’å–å¾—
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const userType = urlParams.get('type');
            const planType = urlParams.get('plan');
            const amount = urlParams.get('amount');

            planData = {
                userType: userType,
                planType: planType,
                amount: parseInt(amount)
            };

            // ãƒ—ãƒ©ãƒ³åã®è¡¨ç¤º
            const planNames = {
                'standard': 'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³',
                'premium': 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³',
                'professional': 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ©ãƒ³'
            };
            document.getElementById('planName').textContent = planNames[planType] || planType;
            document.getElementById('totalAmount').textContent = `Â¥${amount.toLocaleString()}/æœˆ`;

            // ã‚«ãƒ¼ãƒ‰ç•ªå·ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            const cardNumberInput = document.getElementById('cardNumber');
            if (cardNumberInput) {
                cardNumberInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\s/g, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    e.target.value = formattedValue;
                });
            }

            // æœ‰åŠ¹æœŸé™ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            const expiryInput = document.getElementById('expiry');
            if (expiryInput) {
                expiryInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.slice(0, 2) + '/' + value.slice(2, 4);
                    }
                    e.target.value = value;
                });
            }
        };

        function selectPaymentMethod(method) {
            selectedMethod = method;
            
            // ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            
            // é¸æŠã—ãŸæ–¹æ³•ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            event.currentTarget.classList.add('selected');
            
            // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ ã®è¡¨ç¤º/éè¡¨ç¤º
            const creditCardForm = document.getElementById('creditCardForm');
            if (method === 'creditcard') {
                creditCardForm.classList.add('active');
            } else {
                creditCardForm.classList.remove('active');
            }
            
            // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            const payButton = document.getElementById('payButton');
            payButton.disabled = false;
            payButton.textContent = getPayButtonText(method);
        }

        function getPayButtonText(method) {
            const texts = {
                'creditcard': 'ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã‚’é–‹å§‹',
                'paypay': 'PayPayã§æ”¯æ‰•ã†',
                'alipay': 'Alipayã§æ”¯æ‰•ã†',
                'wechat': 'WeChat Payã§æ”¯æ‰•ã†',
                'convenience': 'ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆã‚’é¸æŠ',
                'banktransfer': 'éŠ€è¡ŒæŒ¯è¾¼æƒ…å ±ã‚’ç¢ºèª'
            };
            return texts[method] || 'æ”¯æ‰•ã„ã‚’ç¢ºå®š';
        }

        function processPayment() {
            if (!selectedMethod) {
                alert('æ”¯æ‰•ã„æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }

            // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®å ´åˆã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (selectedMethod === 'creditcard') {
                const cardNumber = document.getElementById('cardNumber').value;
                const cardName = document.getElementById('cardName').value;
                const expiry = document.getElementById('expiry').value;
                const cvv = document.getElementById('cvv').value;

                if (!cardNumber || !cardName || !expiry || !cvv) {
                    alert('ã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                // ã‚«ãƒ¼ãƒ‰ç•ªå·ã®ç°¡æ˜“ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
                if (cardNumber.replace(/\s/g, '').length < 13) {
                    alert('æ­£ã—ã„ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
            }

            // æ”¯æ‰•ã„æƒ…å ±ã‚’ä¿å­˜
            const paymentData = {
                method: selectedMethod,
                plan: planData,
                timestamp: new Date().toISOString(),
                status: 'trial' // ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ä¸­
            };

            localStorage.setItem('paymentInfo', JSON.stringify(paymentData));

            // å„æ”¯æ‰•ã„æ–¹æ³•ã«å¿œã˜ãŸå‡¦ç†
            switch(selectedMethod) {
                case 'creditcard':
                    // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰å‡¦ç†
                    showPaymentProcessing('ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å‡¦ç†ä¸­...');
                    break;
                case 'paypay':
                    // PayPayå‡¦ç†ï¼ˆå®Ÿéš›ã¯PayPay APIã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
                    window.location.href = 'payment-paypay.html?' + new URLSearchParams(planData);
                    return;
                case 'alipay':
                    // Alipayå‡¦ç†ï¼ˆå®Ÿéš›ã¯Alipay APIã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
                    window.location.href = 'payment-alipay.html?' + new URLSearchParams(planData);
                    return;
                case 'wechat':
                    // WeChat Payå‡¦ç†ï¼ˆå®Ÿéš›ã¯WeChat Pay APIã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
                    window.location.href = 'payment-wechat.html?' + new URLSearchParams(planData);
                    return;
                case 'convenience':
                    window.location.href = 'payment-convenience.html?' + new URLSearchParams(planData);
                    return;
                case 'banktransfer':
                    window.location.href = 'payment-bank.html?' + new URLSearchParams(planData);
                    return;
            }
        }

        function showPaymentProcessing(message) {
            const payButton = document.getElementById('payButton');
            payButton.textContent = message;
            payButton.disabled = true;

            // 2ç§’å¾Œã«å®Œäº†ç”»é¢ã¸
            setTimeout(() => {
                window.location.href = 'payment-success.html';
            }, 2000);
        }
    </script>
</body>
</html>